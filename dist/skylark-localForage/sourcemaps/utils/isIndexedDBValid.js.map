{"version":3,"sources":["utils/isIndexedDBValid.js"],"names":["define","idb","open","isSafari","openDatabase","test","navigator","userAgent","platform","hasFetch","fetch","toString","indexOf","indexedDB","IDBKeyRange","e"],"mappings":";;;;;;;AAAAA,QAAQ,SAAU,SAAUC,GACxB,aAqCA,OApCA,WACI,IAGI,IAAKA,IAAQA,EAAIC,KACb,OAAO,EASX,IAAIC,EAAmC,oBAAjBC,cAAgC,4BAA4BC,KAAKC,UAAUC,aAAe,SAASF,KAAKC,UAAUC,aAAe,aAAaF,KAAKC,UAAUE,UAC/KC,EAA4B,mBAAVC,QAAsE,IAA9CA,MAAMC,WAAWC,QAAQ,gBAYvE,QAAST,GAAYM,IAAkC,oBAAdI,WAIlB,oBAAhBC,YACT,MAAOC,GACL,OAAO","file":"../../utils/isIndexedDBValid.js","sourcesContent":["define(['./idb'], function (idb) {\n    'use strict';\n    function isIndexedDBValid() {\n        try {\n            // Initialize IndexedDB; fall back to vendor-prefixed versions\n            // if needed.\n            if (!idb || !idb.open) {\n                return false;\n            }    // We mimic PouchDB here;\n                 //\n                 // We test for openDatabase because IE Mobile identifies itself\n                 // as Safari. Oh the lulz...\n            // We mimic PouchDB here;\n            //\n            // We test for openDatabase because IE Mobile identifies itself\n            // as Safari. Oh the lulz...\n            var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);\n            var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;    // Safari <10.1 does not meet our requirements for IDB support\n                                                                                                              // (see: https://github.com/pouchdb/pouchdb/issues/5572).\n                                                                                                              // Safari 10.1 shipped with fetch, we can use that to detect it.\n                                                                                                              // Note: this creates issues with `window.fetch` polyfills and\n                                                                                                              // overrides; see:\n                                                                                                              // https://github.com/localForage/localForage/issues/856\n            // Safari <10.1 does not meet our requirements for IDB support\n            // (see: https://github.com/pouchdb/pouchdb/issues/5572).\n            // Safari 10.1 shipped with fetch, we can use that to detect it.\n            // Note: this creates issues with `window.fetch` polyfills and\n            // overrides; see:\n            // https://github.com/localForage/localForage/issues/856\n            return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' && // some outdated implementations of IDB that appear on Samsung\n            // and HTC Android devices <4.4 are missing IDBKeyRange\n            // See: https://github.com/mozilla/localForage/issues/128\n            // See: https://github.com/mozilla/localForage/issues/272\n            typeof IDBKeyRange !== 'undefined';\n        } catch (e) {\n            return false;\n        }\n    }\n    return isIndexedDBValid;\n});"]}